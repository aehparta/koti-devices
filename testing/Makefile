
TARGET = X86

# generic settings
USE += SPI GPIO CRC RC5
USE += DRIVER_NRF24L01P

# x86 specific
USE_X86 += FTDI BROADCAST LOG LOG_COLORS
DEFINES_X86 += FTDI_VID=0 FTDI_PID=0 FTDI_DESC=NULL FTDI_SERIAL=NULL
DEFINES_X86 += SPI_SCLK=0 SPI_MISO=2 SPI_MOSI=1 SPI_FREQUENCY=0 SPI_CONTEXT=0 NRF_SS=3 NRF_CE=4

# pic, 8-bit
MCU_PIC8 = pic16lf18345
F_CPU_PIC8 = 16000000
USE_PIC8 = KOTI_NRF_LOW_POWER
DEFINES_PIC8 += SPI_SCLK=GPIOB4 SPI_MISO=GPIOB6 SPI_MOSI=GPIOB5 SPI_FREQUENCY=0 SPI_CONTEXT=0 NRF_SS=GPIOC2 NRF_CE=GPIOC1
DEFINES_PIC8 += LOG_BAUD=38400 PIC8_LOG_TX_PPS=RA5PPS
DEFINES_PIC8 += SPI_HARDCODED_SS=GPIOC2 SPI_HARDCODED_MISO=GPIOB6 SPI_HARDCODED_MOSI=GPIOB5 SPI_HARDCODED_SCLK=GPIOB4
DEFINES_PIC8 += NRF24L01P_HARDCODED_CE=GPIOC1

# avr
MCU_AVR = atmega328p
F_CPU_AVR = 8000000
USE_AVR += LOG LOG_COLORS AVR_CLOCK_DIV_DISABLE KOTI_NRF_LOW_POWER
DEFINES_AVR += LOG_BAUD=38400 SPI_SCLK=0 SPI_MISO=0 SPI_MOSI=0 SPI_FREQUENCY=0 SPI_CONTEXT=0 NRF_SS=GPIOB0 NRF_CE=GPIOB1

# init
include $(KOTI_PATH)/init.mk

# our own sources etc
BUILD_BINS = testing
PROGRAM_BIN = testing
testing_SRC = main.c $(libe_SRC) $(koti_nrf_SRC)

# build
include $(KOTI_PATH)/build.mk

# programmable targets
include $(LIBE_PATH)/flash/program.mk

-include local.mk
