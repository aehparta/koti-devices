
TARGET = PIC8
USE += GPIO SPI I2C CRC RC5
USE += DRIVER_NRF24L01P DRIVER_HDC1080 DRIVER_SHT21 DRIVER_SHT31

# pic8
MCU_PIC8 = 16LF18446
F_CPU_PIC8 = 32000000
USE_PIC8 = I2C_BITBANG KOTI_NRF_LOW_POWER
DEFINES_PIC8 += SPI_CONTEXT=0 SPI_FREQUENCY=0
DEFINES_PIC8 += SPI_MISO=0 SPI_MOSI=0 SPI_SCLK=0 NRF_SS=0 NRF_CE=0
DEFINES_PIC8 += I2C_BITBANG_SCL=GPIOC7 I2C_BITBANG_SDA=GPIOC6
DEFINES_PIC8 += SPI_HARDCODED_SS=GPIOC2 SPI_HARDCODED_MISO=GPIOB6 SPI_HARDCODED_MOSI=GPIOB5 SPI_HARDCODED_SCLK=GPIOB4 SPI_HARDCODED_FREQUENCY=2000000
DEFINES_PIC8 += NRF24L01P_HARDCODED_CE=GPIOC1 NRF24L01P_HARDCODED_IRQ=GPIOC6
DEFINES_PIC8 += LOG_BAUD=38400 PIC8_LOG_TX_PPS=RA5PPS

# x86
USE_X86 += FTDI LOG LOG_COLORS
# USE_X86 += BROADCAST
DEFINES_X86 += SPI_CONTEXT=0 SPI_FREQUENCY=0
DEFINES_X86 += SPI_MISO=2 SPI_MOSI=1 SPI_SCLK=0 NRF_SS=3 NRF_CE=4

# init make system
include $(KOTI_PATH)/init.mk

# our own sources etc
BUILD_BINS = th
PROGRAM_BIN = th
th_SRC = main.c $(libe_SRC) $(koti_nrf_SRC)

# build
include $(KOTI_PATH)/build.mk

# programmable targets
include $(LIBE_PATH)/flash/program.mk

-include local.mk
